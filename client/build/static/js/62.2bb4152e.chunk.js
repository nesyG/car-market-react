"use strict";(self.webpackChunkvehicle_react_project=self.webpackChunkvehicle_react_project||[]).push([[62],{62:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var r=a(791),n=a(444),s=a(116),c=a(165),l=a(861),o=a(98),i=a(601);function d(){return(d=(0,l.Z)((0,c.Z)().mark((function e(t){var a,r,n,s,l,d,u,m,h;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.sortFilterPagingStore,r=a.resetDefaultPage,n=a.params,s=a.sortData,l=t.dataStore.getFilteredData,d=t.tokenStore.token,u="?page=1&rpp=12",s&&(u+="&sort=".concat(s)),e.prev=5,e.next=8,(0,i.Z)(d,"GET",{},u,n);case 8:return m=e.sent,e.next=11,m.data;case 11:h=e.sent,(0,o.z)((function(){l(h)})),r(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log("Error: ".concat(e.t0));case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}var u=a(184),m=(0,n.Pi)((function(){var e=r.useContext(s.T);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("button",{className:"btn btn-dark me-5 search-button",onClick:function(){!function(e){d.apply(this,arguments)}(e)},children:"Search"})})}));function h(){return(h=(0,l.Z)((0,c.Z)().mark((function e(t){var a,r,n,s,l,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.sortFilterPagingStore,r=a.resetDefaultPage,n=a.resetFilterState,s=a.resetSortData,l=t.dataStore.getCarData,o=t.tokenStore.token;try{s(),n(),r(),l(o)}catch(c){console.log("Error: ".concat(c))}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=(0,n.Pi)((function(){var e=r.useContext(s.T);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("button",{className:"btn btn-light ms-5",onClick:function(){!function(e){h.apply(this,arguments)}(e)},children:"Reset Filters"})})})),p=(0,n.Pi)((function(){var e=r.useContext(s.T).sortFilterPagingStore,t=e.filterData,a=e.setFilterData,n=e.makeParams;function c(e){var t=e.target.name,r=e.target.value;a(t,r),n()}return(0,u.jsxs)("div",{className:"browse-buttons-container",children:[(0,u.jsx)("span",{className:"lead",children:"Filter:"}),(0,u.jsx)("div",{className:"browseButtonsContainer",children:[{name:"car",labelText:"Which brand are you looking for?",labelPlaceholder:"Volkswagen"},{name:"car_model",labelText:"Which car model would you like to see?",labelPlaceholder:"Golf 4"},{name:"car_model_year",labelText:"Which model year?",labelPlaceholder:"2000"},{name:"car_color",labelText:"Any particular color?",labelPlaceholder:"Navy Blue"}].map((function(e){return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"form-floating mb-3",children:[(0,u.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:e.labelPlaceholder,name:e.name,value:t[e.name],onChange:c}),(0,u.jsx)("label",{htmlFor:"floatingInput",children:e.labelText})]})},e.name)}))}),(0,u.jsx)(m,{}),(0,u.jsx)(x,{})]})})),g=a(413);function f(e){return b.apply(this,arguments)}function b(){return(b=(0,l.Z)((0,c.Z)().mark((function e(t){var a,r,n,s,l,d,u,m,h,x;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.sortFilterPagingStore,r=a.setPreviousPage,n=a.page,s=a.params,l=a.sortData,d=t.dataStore.getFilteredData,u=t.tokenStore.token,m="?page=".concat(n,"&rpp=12"),l&&(m+="&sort=".concat(l)),e.prev=5,e.next=8,(0,i.Z)(u,"GET",{},m,s);case 8:return h=e.sent,e.next=11,h.data;case 11:if((x=e.sent).item.length){e.next=15;break}return r(),e.abrupt("return");case 15:(0,o.z)((function(){d(x)})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.log("Error: ".concat(e.t0));case 21:case"end":return e.stop()}}),e,null,[[5,18]])})))).apply(this,arguments)}var v=(0,n.Pi)((function(){var e=r.useContext(s.T),t=e.sortFilterPagingStore,a=t.setPreviousPage,n=t.setNextPage,c=t.page;return(0,u.jsxs)("div",{className:"pagination-section",children:[(0,u.jsx)("button",{className:"btn btn-light",onClick:function(){a(),f(e)},children:"Previous Page"}),(0,u.jsx)("span",{className:"currentPage page-link",children:c}),(0,u.jsx)("button",{className:"btn btn-light",onClick:function(){n(),f(e)},children:"Next Page"})]})}));function j(){return(j=(0,l.Z)((0,c.Z)().mark((function e(t,a){var r,n,s,l,o,d,u,m;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tokenStore.token,n=t.dataStore.getCarData,s=t.sortFilterPagingStore,l=s.resetDefaultPage,o=s.resetFilterState,d=s.resetSortData,u="/".concat(a),e.prev=4,e.next=7,(0,i.Z)(r,"DELETE",{},u,{});case 7:m=e.sent,n(r),l(),o(),d(),204===m.status&&alert("You have deleted selected listing!"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log("Error: ".concat(e.t0));case 18:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}var N=(0,n.Pi)((function(e){var t=r.useContext(s.T),a=e.id;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("button",{className:"btn btn-light btn-sm edit-btn",onClick:function(){!function(e,t){j.apply(this,arguments)}(t,a)},children:(0,u.jsx)("span",{className:"material-symbols-outlined btn-symbol",children:"delete"})})})})),y=(0,n.Pi)((function(e){return(0,u.jsxs)("div",{className:"sorting-section",children:[(0,u.jsx)("span",{className:"lead",children:"Sort by:"}),(0,u.jsxs)("select",{className:"form-select form-select-sm sort-container","aria-label":"Default select",onChange:e.setSortValue,value:e.sortData,children:[(0,u.jsx)("option",{value:"",children:null}),(0,u.jsx)("option",{value:"price|asc",children:"Price (Lowest to Highest)"}),(0,u.jsx)("option",{value:"price|desc",children:"Price (Highest to Lowest)"})]})]})})),k=a(942),_=a(439);function C(){return(C=(0,l.Z)((0,c.Z)().mark((function e(t,a,r){var n,s,l,o,d,u,m,h;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tokenStore.token,s=t.dataStore.getCarData,l=t.sortFilterPagingStore,o=l.resetDefaultPage,d=l.resetFilterState,u=l.resetSortData,m="/".concat(r),e.prev=4,e.next=7,(0,i.Z)(n,"PUT",a,m,{});case 7:h=e.sent,s(n),o(),d(),u(),204===h.status&&alert("You have succesfully edited the listing!"),console.log(h),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log("Error: ".concat(e.t0));case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}var P=function(e){var t=e.id,a=r.useContext(s.T),n=(0,r.useState)(!1),c=(0,_.Z)(n,2),l=c[0],o=c[1];function i(){o(!l)}var d={id:t,car:e.car,price:e.price,car_color:e.car_color,car_model:e.car_model,car_model_year:e.car_model_year,car_vin:e.car_vin,availability:e.availability,date_added:e.date_added},m=(0,r.useState)(d),h=(0,_.Z)(m,2),x=h[0],p=h[1];function f(e){if("car_model_year"===e.target.name){var t=Number(e.target.value);p((0,g.Z)((0,g.Z)({},x),{},(0,k.Z)({},e.target.name,t)))}else p((0,g.Z)((0,g.Z)({},x),{},(0,k.Z)({},e.target.name,e.target.value)))}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"btn btn-light btn-sm ms-5 edit-btn",onClick:i,children:(0,u.jsx)("span",{className:"material-symbols-outlined btn-symbol",children:"edit"})}),l&&(0,u.jsxs)("div",{className:"editing-container",children:[(0,u.jsx)("button",{onClick:i,children:"x"}),(0,u.jsx)("h2",{className:"edit-main-text",children:"Edit your car listing"}),(0,u.jsxs)("div",{className:"new-listing-form",children:[(0,u.jsx)("label",{children:"Your car brand:"}),(0,u.jsx)("input",{name:"car",type:"text",className:"form-control",value:x.car,onChange:f}),(0,u.jsx)("label",{children:"Your car model:"}),(0,u.jsx)("input",{name:"car_model",type:"text",className:"form-control",value:x.car_model,onChange:f}),(0,u.jsx)("label",{children:"Your car model year:"}),(0,u.jsx)("input",{name:"car_model_year",type:"text",className:"form-control",value:x.car_model_year,onChange:f}),(0,u.jsx)("label",{children:"Your car color:"}),(0,u.jsx)("input",{name:"car_color",type:"text",className:"form-control",value:x.car_color,onChange:f}),(0,u.jsx)("label",{children:"Your car price:"}),(0,u.jsx)("input",{name:"price",type:"text",className:"form-control",value:x.price,onChange:f}),(0,u.jsx)("button",{className:"update-btn",onClick:function(){i(),function(e,t,a){C.apply(this,arguments)}(a,x,t)},children:"Edit"})]})]})]})},S=a(87),Z=(0,n.Pi)((function(){var e=r.useContext(s.T),t=e.dataStore,a=t.getCarData,n=t.carData,c=e.sortFilterPagingStore,l=c.setSortData,o=c.sortData,i=e.tokenStore.token;return(0,r.useEffect)((function(){a(i)}),[]),(0,u.jsxs)("div",{className:"data-container",children:[(0,u.jsx)(y,{sortData:o,setSortValue:function(e){var t=e.target.value;l(t)}}),(0,u.jsx)("div",{className:"card-container",children:void 0!==n&&n.item?n.item.map((function(e){return(0,u.jsxs)("div",{className:"card car-card",children:[(0,u.jsxs)("div",{className:"link-and-delete-btn",children:[(0,u.jsx)(S.rU,{to:"/singleListing/".concat(e.id),children:"More Info"}),(0,u.jsx)(P,(0,g.Z)({},e)),(0,u.jsx)(N,(0,g.Z)({},e))]}),(0,u.jsx)("span",{className:"material-symbols-outlined",children:"car_rental"}),(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsx)("h4",{className:"card-title",children:e.car}),(0,u.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,u.jsx)("li",{className:"list-group-item",children:e.car_model}),(0,u.jsx)("li",{className:"list-group-item",children:e.car_model_year}),(0,u.jsx)("li",{className:"list-group-item",children:e.car_color}),(0,u.jsx)("li",{className:"list-group-item price-text",children:e.price})]})]})]},e.id)})):(0,u.jsx)("div",{className:"spinner",children:(0,u.jsx)("div",{className:"spinner-border",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}),(0,u.jsx)(v,{})]})}));function D(){return(D=(0,l.Z)((0,c.Z)().mark((function e(t,a){var r,n,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tokenStore.token,n=t.dataStore.getCarData,e.prev=2,e.next=5,(0,i.Z)(r,"POST",a,"",{});case 5:s=e.sent,n(r),201===s.status&&alert("Your listing has been succesfully created!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var F=(0,n.Pi)((function(){var e=r.useContext(s.T),t=(0,r.useState)(!1),a=(0,_.Z)(t,2),n=a[0],c=a[1];function l(){c(!n)}var o=(0,r.useState)({car:"",price:"",car_color:"",car_model:"",car_model_year:0,car_vin:"test",availability:!0,date_added:"10th"}),i=(0,_.Z)(o,2),d=i[0],m=i[1];function h(e){var t=e.target,a=t.name,r=t.value;"car_model_year"===a&&(r=Number(r)),m((0,g.Z)((0,g.Z)({},d),{},(0,k.Z)({},a,r)))}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"btn btn-light me-5 add-btn","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",onClick:l,children:"Add New Listing"}),n&&(0,u.jsx)("div",{className:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,u.jsx)("div",{className:"modal-dialog",children:(0,u.jsxs)("div",{className:"modal-content",children:[(0,u.jsxs)("div",{className:"modal-header",children:[(0,u.jsx)("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:"Create your car listing"}),(0,u.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:l})]}),(0,u.jsx)("div",{className:"modal-body",children:(0,u.jsxs)("div",{className:"new-listing-form",children:[(0,u.jsx)("label",{children:"Your car brand:"}),(0,u.jsx)("input",{name:"car",type:"text",className:"form-control",value:d.car,onChange:h}),(0,u.jsx)("label",{children:"Your car model:"}),(0,u.jsx)("input",{name:"car_model",type:"text",className:"form-control",value:d.car_model,onChange:h}),(0,u.jsx)("label",{children:"Your car model year:"}),(0,u.jsx)("input",{name:"car_model_year",type:"text",className:"form-control",value:d.car_model_year,onChange:h}),(0,u.jsx)("label",{children:"Your car color:"}),(0,u.jsx)("input",{name:"car_color",type:"text",className:"form-control",value:d.car_color,onChange:h}),(0,u.jsx)("label",{children:"Your car price:"}),(0,u.jsx)("input",{name:"price",type:"text",className:"form-control",value:d.price,onChange:h}),(0,u.jsx)("button",{className:"create-btn",onClick:function(){!function(e,t){D.apply(this,arguments)}(e,d),l()},children:"Create"})]})})]})})})]})})),w=(0,n.Pi)((function(){return useEffect((function(){fetch("https://localhost:3500",{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top",children:[(0,u.jsx)("h1",{className:"h1 home-h1",children:"Find your dream car"}),(0,u.jsx)(F,{})]}),(0,u.jsxs)("div",{className:"hero-section",children:[(0,u.jsx)(p,{}),(0,u.jsx)(Z,{})]})]})}))}}]);
//# sourceMappingURL=62.2bb4152e.chunk.js.map